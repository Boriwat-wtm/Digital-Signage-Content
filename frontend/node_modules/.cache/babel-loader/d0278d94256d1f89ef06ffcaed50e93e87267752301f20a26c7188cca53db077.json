{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pyaks\\\\Digital-Singnage-CMS-main\\\\Digital-Singnage-CMS-main\\\\src\\\\UploadPage.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./UploadPage.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function UploadPage() {\n  _s();\n  const [uploadType, setUploadType] = useState(\"text\"); // ประเภทการอัปโหลด: \"text\" หรือ \"image\"\n  const [message, setMessage] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const history = useHistory();\n  useEffect(() => {\n    const orderDetails = JSON.parse(localStorage.getItem(\"orderDetails\"));\n    if (!orderDetails) {\n      alert(\"ไม่มีข้อมูลคำสั่งซื้อ\");\n      history.push(\"/select\");\n    }\n  }, [history]);\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file && !file.type.startsWith(\"image/\")) {\n      alert(\"กรุณาเลือกรูปภาพเท่านั้น\");\n      return;\n    }\n    setImage(file);\n    setPreview(URL.createObjectURL(file));\n  };\n  const handleUpload = async () => {\n    if (uploadType === \"text\" && !message) {\n      alert(\"กรุณาเพิ่มข้อความก่อนอัปโหลด\");\n      return;\n    }\n    if (uploadType === \"image\" && (!image || !message)) {\n      alert(\"กรุณาเพิ่มข้อความและเลือกรูปภาพก่อนอัปโหลด\");\n      return;\n    }\n    const formData = new FormData();\n    if (uploadType === \"image\") {\n      formData.append(\"image\", image);\n    }\n    formData.append(\"message\", message);\n    try {\n      const res = await axios.post(\"http://localhost:3001/upload-content\", formData);\n      alert(\"อัปโหลดสำเร็จ!\");\n\n      // เปลี่ยนเส้นทางไปยังหน้าชำระเงิน\n      history.push(\"/payment\");\n    } catch (error) {\n      console.error(\"Error uploading content:\", error.response || error.message);\n      alert(\"เกิดข้อผิดพลาดในการอัปโหลด\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"upload-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"upload-title\",\n        children: \"Upload Content\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"upload-description\",\n        children: \"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\\u0E01\\u0E32\\u0E23\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E41\\u0E25\\u0E30\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload-type-selector\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"uploadType\",\n            value: \"text\",\n            checked: uploadType === \"text\",\n            onChange: () => setUploadType(\"text\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), \"\\u0E2A\\u0E48\\u0E07\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"uploadType\",\n            value: \"image\",\n            checked: uploadType === \"image\",\n            onChange: () => setUploadType(\"image\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), \"\\u0E2A\\u0E48\\u0E07\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\\u0E41\\u0E25\\u0E30\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"upload-textarea\",\n        placeholder: \"Enter your message...\",\n        value: message,\n        onChange: e => setMessage(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), uploadType === \"image\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleImageChange,\n          className: \"upload-file-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), preview && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"upload-preview\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: preview,\n            alt: \"Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"upload-button\",\n        onClick: handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(UploadPage, \"1/Xg4jeCnQbl96kofCOz4OhMhLM=\", false, function () {\n  return [useHistory];\n});\n_c = UploadPage;\nvar _c;\n$RefreshReg$(_c, \"UploadPage\");","map":{"version":3,"names":["useState","useEffect","axios","useHistory","jsxDEV","_jsxDEV","Fragment","_Fragment","UploadPage","_s","uploadType","setUploadType","message","setMessage","image","setImage","preview","setPreview","history","orderDetails","JSON","parse","localStorage","getItem","alert","push","handleImageChange","e","file","target","files","type","startsWith","URL","createObjectURL","handleUpload","formData","FormData","append","res","post","error","console","response","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","value","checked","onChange","placeholder","accept","src","alt","onClick","_c","$RefreshReg$"],"sources":["C:/Users/pyaks/Digital-Singnage-CMS-main/Digital-Singnage-CMS-main/src/UploadPage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./UploadPage.css\";\n\nexport default function UploadPage() {\n  const [uploadType, setUploadType] = useState(\"text\"); // ประเภทการอัปโหลด: \"text\" หรือ \"image\"\n  const [message, setMessage] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const history = useHistory();\n\n  useEffect(() => {\n    const orderDetails = JSON.parse(localStorage.getItem(\"orderDetails\"));\n    if (!orderDetails) {\n      alert(\"ไม่มีข้อมูลคำสั่งซื้อ\");\n      history.push(\"/select\");\n    }\n  }, [history]);\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file && !file.type.startsWith(\"image/\")) {\n      alert(\"กรุณาเลือกรูปภาพเท่านั้น\");\n      return;\n    }\n    setImage(file);\n    setPreview(URL.createObjectURL(file));\n  };\n\n  const handleUpload = async () => {\n    if (uploadType === \"text\" && !message) {\n      alert(\"กรุณาเพิ่มข้อความก่อนอัปโหลด\");\n      return;\n    }\n\n    if (uploadType === \"image\" && (!image || !message)) {\n      alert(\"กรุณาเพิ่มข้อความและเลือกรูปภาพก่อนอัปโหลด\");\n      return;\n    }\n\n    const formData = new FormData();\n    if (uploadType === \"image\") {\n      formData.append(\"image\", image);\n    }\n    formData.append(\"message\", message);\n\n    try {\n      const res = await axios.post(\"http://localhost:3001/upload-content\", formData);\n      alert(\"อัปโหลดสำเร็จ!\");\n\n      // เปลี่ยนเส้นทางไปยังหน้าชำระเงิน\n      history.push(\"/payment\");\n    } catch (error) {\n      console.error(\"Error uploading content:\", error.response || error.message);\n      alert(\"เกิดข้อผิดพลาดในการอัปโหลด\");\n    }\n  };\n\n  return (\n    <div className=\"upload-page\">\n      <div className=\"upload-container\">\n        <h1 className=\"upload-title\">Upload Content</h1>\n        <p className=\"upload-description\">\n          กรุณาเลือกประเภทการอัปโหลดและกรอกข้อมูลที่ต้องการ\n        </p>\n\n        {/* ตัวเลือกประเภทการอัปโหลด */}\n        <div className=\"upload-type-selector\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"uploadType\"\n              value=\"text\"\n              checked={uploadType === \"text\"}\n              onChange={() => setUploadType(\"text\")}\n            />\n            ส่งข้อความ\n          </label>\n          <label>\n            <input\n              type=\"radio\"\n              name=\"uploadType\"\n              value=\"image\"\n              checked={uploadType === \"image\"}\n              onChange={() => setUploadType(\"image\")}\n            />\n            ส่งรูปภาพและข้อความ\n          </label>\n        </div>\n\n        {/* ฟอร์มสำหรับข้อความ */}\n        <textarea\n          className=\"upload-textarea\"\n          placeholder=\"Enter your message...\"\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n        />\n\n        {/* ฟอร์มสำหรับรูปภาพ (แสดงเฉพาะเมื่อเลือก \"image\") */}\n        {uploadType === \"image\" && (\n          <>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageChange}\n              className=\"upload-file-input\"\n            />\n            {preview && (\n              <div className=\"upload-preview\">\n                <img src={preview} alt=\"Preview\" />\n              </div>\n            )}\n          </>\n        )}\n\n        <button className=\"upload-button\" onClick={handleUpload}>\n          Upload\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}